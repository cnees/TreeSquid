{% load staticfiles %}

<style>
  #container {
    background:url('http://i82.photobucket.com/albums/j279/qazfan/x_1.png') no-repeat center;
    width:345px;
    height:345px;
  }
  .node {
    z-index:5;
    transition:background 0.25s;
    width:100px;
    height:100px;
    box-sizing:border-box;
    background:#ccc;
    font-size:small;
    font-family:sans-serif;
    overflow:hidden;
    padding:10px;
    border:10px solid #ccc;
    word-wrap: break-word;
    border-radius:5px;
  }

  #container .node {
    display:inline-block;
    margin:10px;
    position:absolute;
  }

  #node_1, #node_2, #node_3 {top:0px;}
  #node_4, #node_0, #node_5 {top:120px;}
  #node_6, #node_7, #node_8 {top:240px;}
  #node_1, #node_4, #node_6 {left:0px;}
  #node_2, #node_0, #node_7 {left:120px;}
  #node_3, #node_5, #node_8 {left:240px;}

  .node:focus {
  }
  .node-focus {
    box-shadow:0 0 8px #000;
    overflow:auto;
    background:rgba(255,255,255,1);
    width:260px;
    height:260px;
    z-index:10;
    top:30px!important;
    left:30px!important;
  }
</style>
<div id="cy" style="border:1px solid #f00;position:fixed;top:0px;right:0px;width:500px;height:500px;">&nbsp;</div>
<div id="container">
<div class="node" id="node_0" tabindex="5">
  {{ root.root_text }}
</div>
{% for reply in root.reply_set.all %}
  <div class="node" id="node_{{ forloop.counter }}" tabindex="{{ forloop.counter }}">
    {{ reply.reply_text }}
  </div>
{% endfor %}
</div>
<script>
  // Watch out, global variable.
  var GRAPH_ELEMENTS = [ // list of graph elements to start with
    { // node a
      data: { id: '{{ root.root_text }}' }
    },
    {% for reply in root.reply_set.all %}
      {
        data: {
          id: '{{ reply.id }}',
          label: '{{ reply.reply_text }}'
        }
      },
    {% endfor %}
    { // edge ab
      data: { id: 'ab', source: 'a', target: 'b' }
    }
  ]
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="{% static 'conversations/cytoscape.js' %}"></script>
<script src="{% static 'conversations/index.js' %}"></script>